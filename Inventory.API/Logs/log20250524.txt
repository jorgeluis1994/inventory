2025-05-24 07:48:23.610 -05:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-24 07:49:19.563 -05:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-24 07:49:20.036 -05:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-24 07:49:20.052 -05:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-05-24 07:49:20.075 -05:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-05-24 07:49:20.150 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-05-24 07:49:20.160 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-24 07:49:20.161 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-24 07:49:20.165 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-24 07:49:20.179 -05:00 [INF] Applying migration '20250524124824_CreateUserTable'.
2025-05-24 07:49:20.203 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Products] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    CONSTRAINT [PK_Products] PRIMARY KEY ([Id])
);
2025-05-24 07:49:20.205 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(max) NULL,
    [Password] nvarchar(max) NULL,
    [Email] nvarchar(255) NOT NULL,
    [Role] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (SYSUTCDATETIME()),
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-05-24 07:49:20.207 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Batches] (
    [Id] int NOT NULL IDENTITY,
    [ProductId] int NOT NULL,
    [BatchNumber] nvarchar(max) NULL,
    [EntryDate] datetime2 NOT NULL,
    [Quantity] int NOT NULL,
    CONSTRAINT [PK_Batches] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Batches_Products_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [Products] ([Id]) ON DELETE CASCADE
);
2025-05-24 07:49:20.210 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Transactions] (
    [Id] int NOT NULL IDENTITY,
    [BatchId] int NOT NULL,
    [TransactionType] nvarchar(max) NOT NULL,
    [Quantity] int NOT NULL,
    [TransactionDate] datetime2 NOT NULL,
    [Notes] nvarchar(max) NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Transactions_Batches_BatchId] FOREIGN KEY ([BatchId]) REFERENCES [Batches] ([Id]) ON DELETE CASCADE
);
2025-05-24 07:49:20.211 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Batches_ProductId] ON [Batches] ([ProductId]);
2025-05-24 07:49:20.397 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_BatchId] ON [Transactions] ([BatchId]);
2025-05-24 07:49:20.399 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]);
2025-05-24 07:49:20.416 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250524124824_CreateUserTable', N'9.0.5');
2025-05-24 07:49:20.421 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-05-24 08:16:01.547 -05:00 [INF] Now listening on: http://localhost:5042
2025-05-24 08:16:01.692 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-24 08:16:01.696 -05:00 [INF] Hosting environment: Development
2025-05-24 08:16:01.698 -05:00 [INF] Content root path: C:\Users\jorge\Source\Repos\inventory\Inventory.API
2025-05-24 08:16:02.532 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5042/swagger/index.html - null null
2025-05-24 08:16:02.838 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5042/swagger/index.html - 200 null text/html;charset=utf-8 318.8543ms
2025-05-24 08:16:03.229 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5042/_framework/aspnetcore-browser-refresh.js - null null
2025-05-24 08:16:03.229 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5042/_vs/browserLink - null null
2025-05-24 08:16:03.238 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5042/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.9898ms
2025-05-24 08:16:03.327 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5042/_vs/browserLink - 200 null text/javascript; charset=UTF-8 98.5836ms
2025-05-24 08:16:03.400 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5042/swagger/v1/swagger.json - null null
2025-05-24 08:16:03.412 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5042/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.5354ms
2025-05-24 08:17:39.816 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5042/api/User/login - application/json 61
2025-05-24 08:17:39.834 -05:00 [INF] CORS policy execution failed.
2025-05-24 08:17:39.837 -05:00 [INF] Request origin http://localhost:5042 does not have permission to access the resource.
2025-05-24 08:17:39.843 -05:00 [WRN] Failed to determine the https port for redirect.
2025-05-24 08:17:39.846 -05:00 [INF] Executing endpoint 'Inventory.API.Controllers.UserController.LoginUser (Inventory.API)'
2025-05-24 08:17:39.876 -05:00 [INF] Route matched with {action = "LoginUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginUser(Inventory.Application.DTOs.UserDto) on controller Inventory.API.Controllers.UserController (Inventory.API).
2025-05-24 08:17:54.960 -05:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-24 08:17:55.718 -05:00 [INF] Executed DbCommand (47ms) [Parameters=[@__email_0='admin@example.com' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-05-24 08:17:55.977 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-05-24 08:17:55.986 -05:00 [INF] Executed action Inventory.API.Controllers.UserController.LoginUser (Inventory.API) in 16102.4382ms
2025-05-24 08:17:55.991 -05:00 [INF] Executed endpoint 'Inventory.API.Controllers.UserController.LoginUser (Inventory.API)'
2025-05-24 08:17:56.002 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5042/api/User/login - 200 null text/plain; charset=utf-8 16186.43ms
